<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CustomGPT Widget - External Site Integration Guide</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            line-height: 1.6;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 10px;
        }
        h2 {
            color: #555;
            margin-top: 30px;
        }
        .code-block {
            background: #f8f8f8;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
        }
        .code-block code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
            line-height: 1.5;
        }
        .important {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 4px;
            padding: 15px;
            margin: 20px 0;
        }
        .important strong {
            color: #856404;
        }
        .file-list {
            background: #e8f4f8;
            border: 1px solid #bee5eb;
            border-radius: 4px;
            padding: 15px;
            margin: 15px 0;
        }
        .widget-demo {
            border: 2px dashed #007bff;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
            min-height: 600px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>CustomGPT Widget - External Site Integration</h1>
        
        <div class="important">
            <strong>⚠️ Important:</strong> When embedding the widget on an external site, you MUST specify the <code>apiUrl</code> parameter pointing to your Next.js application server.
        </div>

        <h2>Step 1: Host Your Next.js Application</h2>
        <p>First, deploy your CustomGPT UI application to a server. This could be:</p>
        <ul>
            <li>Vercel (recommended for Next.js apps)</li>
            <li>Your own server</li>
            <li>Any Node.js hosting provider</li>
        </ul>

        <h2>Step 2: Copy Widget Files</h2>
        <p>Copy these files from <code>dist/widget/</code> to your external site:</p>
        <div class="file-list">
            <strong>Required files:</strong>
            <ul>
                <li><code>customgpt-widget.js</code> - Main widget JavaScript</li>
                <li><code>customgpt-widget.css</code> - Widget styles</li>
                <li><code>logo.png</code> - CustomGPT logo</li>
                <li><code>vendors.js</code> - Vendor dependencies (if using code splitting)</li>
            </ul>
        </div>

        <h2>Step 3: Include Widget Files</h2>
        <div class="code-block">
            <code>&lt;!-- In your HTML head or before closing body tag --&gt;
&lt;link rel="stylesheet" href="path/to/customgpt-widget.css"&gt;
&lt;script src="path/to/customgpt-widget.js"&gt;&lt;/script&gt;</code>
        </div>

        <h2>Step 4: Initialize the Widget</h2>
        <div class="code-block">
            <code>&lt;!-- Widget container --&gt;
&lt;div id="my-chat-widget"&gt;&lt;/div&gt;

&lt;script&gt;
document.addEventListener('DOMContentLoaded', function() {
    const widget = CustomGPTWidget.init({
        // Required
        agentId: 'YOUR_AGENT_ID',
        
        // CRITICAL: Set your Next.js app URL
        apiUrl: 'https://your-app-domain.com',
        
        // Widget configuration
        containerId: 'my-chat-widget',
        mode: 'embedded',
        theme: 'light',
        
        // Optional settings
        agentName: 'Customer Support',
        enableCitations: true,
        enableFeedback: true,
        width: '400px',
        height: '600px'
    });
});
&lt;/script&gt;</code>
        </div>

        <h2>Configuration Options</h2>
        <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
            <tr style="background: #f8f8f8;">
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Parameter</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Type</th>
                <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Description</th>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>agentId</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;">string/number</td>
                <td style="padding: 10px; border: 1px solid #ddd;"><strong>Required</strong>. Your CustomGPT agent ID</td>
            </tr>
            <tr style="background: #fffacd;">
                <td style="padding: 10px; border: 1px solid #ddd;"><code>apiUrl</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;">string</td>
                <td style="padding: 10px; border: 1px solid #ddd;"><strong>Required for external sites</strong>. URL of your Next.js app</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>containerId</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;">string</td>
                <td style="padding: 10px; border: 1px solid #ddd;">ID of the container element</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>mode</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;">string</td>
                <td style="padding: 10px; border: 1px solid #ddd;">'embedded' | 'floating' | 'widget'</td>
            </tr>
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;"><code>theme</code></td>
                <td style="padding: 10px; border: 1px solid #ddd;">string</td>
                <td style="padding: 10px; border: 1px solid #ddd;">'light' | 'dark'</td>
            </tr>
        </table>

        <h2>Floating Widget Example</h2>
        <div class="code-block">
            <code>&lt;script&gt;
// Floating button in bottom-right corner
const floatingWidget = CustomGPTWidget.init({
    agentId: 'YOUR_AGENT_ID',
    apiUrl: 'https://your-app-domain.com',
    mode: 'floating',
    position: 'bottom-right',
    theme: 'light'
});

// You can control it programmatically
floatingWidget.open();   // Open the chat
floatingWidget.close();  // Close the chat
floatingWidget.toggle(); // Toggle open/close
&lt;/script&gt;</code>
        </div>

        <h2>CORS Configuration</h2>
        <div class="important">
            <strong>Note:</strong> Your Next.js application must be configured to accept requests from your external domain. This is handled by the API proxy routes, but you may need to add your domain to the ALLOWED_ORIGINS environment variable.
        </div>

        <h2>Live Demo</h2>
        <div class="widget-demo">
            <h3>Widget would appear here</h3>
            <p>To see a working example:</p>
            <ol>
                <li>Make sure your Next.js app is running</li>
                <li>Update the <code>apiUrl</code> in the example code</li>
                <li>Add your actual agent ID</li>
                <li>Open this file in a browser</li>
            </ol>
        </div>

        <h2>Troubleshooting</h2>
        <ul>
            <li><strong>404 Errors:</strong> Make sure <code>apiUrl</code> points to your Next.js app</li>
            <li><strong>CORS Errors:</strong> Configure ALLOWED_ORIGINS in your Next.js app</li>
            <li><strong>No agent selected:</strong> Verify your agent ID is correct</li>
            <li><strong>Logo not loading:</strong> Ensure logo.png is in the same directory as the JS files</li>
        </ul>
    </div>
</body>
</html>