<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CustomGPT Floating Widget Test</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      padding: 40px;
      background-color: #f5f5f5;
    }
    .content {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      margin-bottom: 20px;
    }
    p {
      color: #666;
      line-height: 1.6;
    }
    .config-info {
      background: #f0f0f0;
      padding: 20px;
      border-radius: 4px;
      margin-top: 20px;
    }
    .config-info code {
      background: #fff;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="content">
    <h1>CustomGPT Floating Widget Test</h1>
    <p>This page demonstrates the CustomGPT floating widget with avatar support.</p>
    <p>Look for the floating chat button in the bottom-right corner of the page. It should display your agent's avatar image.</p>
    
    <div class="config-info">
      <h3>Configuration:</h3>
      <p>Agent ID: <code id="agent-id">Loading...</code></p>
      <p>Mode: <code>floating</code></p>
      <p>Position: <code>bottom-right</code></p>
      <p>Features: Avatar display, mobile-responsive label</p>
    </div>

    <h2>Test Instructions:</h2>
    <ol>
      <li>Check that the floating button appears in the bottom-right corner</li>
      <li>Verify that the agent's avatar is displayed in the button (not the default icon)</li>
      <li>Hover over the button to see the "Chat with us" label (desktop only)</li>
      <li>Resize the window to mobile size and verify the label is hidden</li>
      <li>Click the button to open the chat widget</li>
      <li>Click the close button (Ã—) to close the widget</li>
      <li>Verify that conversations persist across page refreshes</li>
    </ol>
  </div>

  <!-- Include the widget scripts -->
  <script src="../dist/widget/vendors.js"></script>
  <script src="../dist/widget/customgpt-widget.js"></script>
  <link rel="stylesheet" href="../dist/widget/customgpt-widget.css">

  <script>
    // Configuration - Update these values
    const AGENT_ID = '9322'; // Replace with your agent ID
    const API_URL = 'http://localhost:3000'; // Your Next.js app URL

    // Display the agent ID
    document.getElementById('agent-id').textContent = AGENT_ID;

    // Initialize the floating widget
    const widget = window.CustomGPTWidget.init({
      agentId: AGENT_ID,
      apiUrl: API_URL,
      mode: 'floating',
      position: 'bottom-right',
      primaryColor: '#007acc',
      buttonSize: 'md',
      showLabel: true,
      label: 'Chat with us',
      theme: 'light',
      enableCitations: true,
      enableFeedback: true,
      width: '400px',
      height: '600px',
      onOpen: () => {
        console.log('Widget opened');
      },
      onClose: () => {
        console.log('Widget closed');
      },
      onMessage: (message) => {
        console.log('New message:', message);
      }
    });

    // Make widget available globally for testing
    window.testWidget = widget;
    console.log('Widget initialized:', widget);
  </script>
</body>
</html>